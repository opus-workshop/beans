---
id: 13.2
title: Add slug field to Bean struct
status: open
priority: 1
created_at: 2026-01-30T00:00:00Z
updated_at: 2026-01-30T00:00:00Z
parent: 13
dependencies: [13.1]
type: task
---

# Add slug field to Bean struct

## What

Update `src/bean.rs` to add an optional `slug` field to the Bean struct. This field stores the kebab-case slug derived from the title, used for filenames in the new `{id}-{slug}.md` format.

## Current Bean struct

```rust
#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
pub struct Bean {
    pub id: String,
    pub title: String,
    pub status: Status,
    #[serde(default = "default_priority")]
    pub priority: u8,
    pub created_at: DateTime<Utc>,
    pub updated_at: DateTime<Utc>,

    #[serde(skip_serializing_if = "Option::is_none")]
    pub description: Option<String>,
    // ... other fields
}
```

## Implementation

Add slug field:

```rust
#[derive(Debug, Clone, PartialEq, Serialize, Deserialize)]
pub struct Bean {
    pub id: String,
    pub title: String,
    #[serde(skip_serializing_if = "Option::is_none")]
    pub slug: Option<String>,
    // ... rest of fields
}
```

**Notes:**
- Make `slug` optional for backwards compatibility (old beans without slug)
- Place after `title` (semantic grouping: id, title, slug)
- Use `#[serde(skip_serializing_if = "Option::is_none")]` to avoid cluttering old beans
- `slug` is derived from title, so it's safe to regenerate if missing

## Code locations

- `src/bean.rs:50-90` â€” Add `slug: Option<String>` field to `Bean` struct

## Acceptance

- [ ] `slug` field added to `Bean` struct as `Option<String>`
- [ ] Field is optional (skip_serializing_if applied)
- [ ] Placed logically after `title`
- [ ] Struct still derives Debug, Clone, PartialEq, Serialize, Deserialize
- [ ] Existing tests still compile and pass
- [ ] No breaking changes (old beans without slug still deserialize)

## Testing

```bash
cargo build
cargo test bean::
```

Verify:
- Old bean YAML (without slug) still deserializes
- New bean YAML (with slug) deserializes correctly
- Struct compiles without warnings
