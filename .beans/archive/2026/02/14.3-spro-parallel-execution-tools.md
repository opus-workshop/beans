id: '14.3'
title: Spro parallel execution tools
slug: spro-parallel-execution-tools
status: closed
priority: 2
created_at: 2026-02-03T05:36:54.884932Z
updated_at: 2026-02-03T06:12:00.520431Z
description: |-
  ## What to implement

  Add tools for parallel agent orchestration via spro.

  ### Tools to implement

  1. **spro_run** - Run all children of a parent bean in parallel
  2. **spro_spawn** - Spawn a single agent to implement one bean
  3. **spro_status** - Check status of running/completed agents
  4. **spro_logs** - View logs from an agent

  ### File

  ~/.pi/agent/extensions/beans-tools.ts (extend existing)

  ### Parameters

  ```typescript
  // spro_run
  Type.Object({
    parentId: Type.String({ description: "Parent bean ID" }),
    dryRun: Type.Optional(Type.Boolean({ description: "Preview without executing" })),
    parallel: Type.Optional(Type.Number({ description: "Max parallel agents (default 4)" })),
    keepGoing: Type.Optional(Type.Boolean({ description: "Continue if some fail" })),
  })

  // spro_spawn
  Type.Object({
    beanId: Type.String({ description: "Bean ID to implement" }),
    timeout: Type.Optional(Type.Number({ description: "Timeout in minutes" })),
  })

  // spro_status
  Type.Object({
    parentId: Type.Optional(Type.String({ description: "Filter to parent" })),
  })

  // spro_logs
  Type.Object({
    beanId: Type.String({ description: "Bean ID to get logs for" }),
  })
  ```

  ### Response Shapes

  ```typescript
  // spro_run result
  {
    completed: string[],  // bean IDs
    failed: string[],     // bean IDs
    skipped: string[],    // bean IDs (blocked)
  }

  // spro_status result
  {
    running: [{ beanId, startedAt, pid }],
    completed: [{ beanId, duration, success }],
  }
  ```

  ### Acceptance

  - spro_run with --dry-run shows plan without executing
  - spro_spawn creates checkpoint, claims bean, runs agent
  - spro_status shows running/completed agents
  - spro_logs returns agent output
closed_at: 2026-02-03T06:12:00.520431Z
close_reason: Spro parallel execution tools (spro_run, spro_spawn, spro_status, spro_logs) were already implemented in beans-tools.ts with full parameters, response handling, and TUI rendering.
parent: '14'
verify: grep -q 'spro_run' ~/.pi/agent/extensions/beans-tools.ts && grep -q 'spro_spawn' ~/.pi/agent/extensions/beans-tools.ts
claimed_at: 2026-02-03T06:11:43.374075Z
is_archived: true
produces:
- spro_run
- spro_spawn
- spro_status
- spro_logs
requires:
- BeansExtension
