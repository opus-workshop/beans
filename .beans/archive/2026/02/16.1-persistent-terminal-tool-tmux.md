id: '16.1'
title: Persistent Terminal Tool (tmux)
slug: persistent-terminal-tool-tmux
status: closed
priority: 2
created_at: 2026-02-02T09:23:21.166492Z
updated_at: 2026-02-02T09:31:02.493301Z
description: |-
  Create a pi extension that provides persistent terminal sessions via tmux.

  ## Problem
  Current bash tool is one-shot - can't interact with long-running processes like:
  - Dev servers (npm run dev, cargo watch)
  - REPLs (python, node, psql)
  - Watch modes (test --watch)
  - Interactive programs (vim, htop)

  ## Solution
  Wrap tmux to provide:
  - `terminal_start` - Create named session, optionally run command
  - `terminal_send` - Send text/keys to session
  - `terminal_read` - Capture current screen content
  - `terminal_list` - List active sessions
  - `terminal_close` - End session

  ## Reference
  - tmux-mcp-server pattern: github.com/lox/tmux-mcp-server
  - tmux control mode: tmux -C for programmatic control
  - libtmux (Python): github.com/tmux-python/libtmux

  ## Files
  - ~/.pi/agent/extensions/terminal/index.ts
  - ~/.pi/agent/extensions/terminal/tmux.ts (tmux wrapper)

  ## Acceptance
  - Can start a dev server, check its output, send ctrl+c to stop
  - Sessions persist across tool calls
  - Handles special keys (ctrl+c, escape, enter, arrows)
closed_at: 2026-02-02T09:31:02.493301Z
parent: '16'
verify: test -f ~/.pi/agent/extensions/terminal/index.ts && pi -e ~/.pi/agent/extensions/terminal/index.ts -p 'use terminal_list to show sessions' 2>&1 | grep -q 'terminal'
claimed_at: 2026-02-02T09:28:01.818445Z
is_archived: true
