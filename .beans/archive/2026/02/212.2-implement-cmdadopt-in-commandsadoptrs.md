id: '212.2'
title: Implement cmd_adopt in commands/adopt.rs
slug: implement-cmdadopt-in-commandsadoptrs
status: closed
priority: 2
created_at: 2026-02-02T05:56:13.583337Z
updated_at: 2026-02-02T05:59:50.436454Z
description: "Create the adopt command implementation.\n\n## What to do\n\n1. Create `src/commands/adopt.rs` with `cmd_adopt(beans_dir, parent_id, child_ids)`\n\n2. Core logic:\n   - Load parent bean, verify it exists\n   - For each child ID in order:\n     - Load the child bean  \n     - Compute new ID: `{parent_id}.{n}` where n is 1, 2, 3...\n     - Update bean's `id` field to new ID\n     - Set bean's `parent` field to parent_id\n     - Rename file from `{old_id}-{slug}.yaml` to `{new_id}-{slug}.yaml`\n   - Update deps: scan ALL beans, replace old IDs with new IDs in deps arrays\n   - Rebuild index with `Index::rebuild()`\n\n3. Add to `src/commands/mod.rs`: `pub mod adopt;` and re-export `cmd_adopt`\n\n## Files\n- src/commands/adopt.rs (new)\n- src/commands/mod.rs (add module)\n\n## Reference\nLook at src/commands/create.rs for patterns on:\n- Loading beans\n- Writing beans  \n- Updating index"
closed_at: 2026-02-02T05:59:50.436454Z
parent: '212'
dependencies:
- '212.1'
verify: test -f src/commands/adopt.rs && cargo build
attempts: 1
claimed_at: 2026-02-02T05:57:17.302778Z
is_archived: true
