id: '43.1'
title: Add --claim flag to bn create
slug: add-claim-flag-to-bn-create
status: closed
priority: 2
created_at: 2026-02-18T05:35:01.273220Z
updated_at: 2026-02-18T05:39:30.524273Z
description: |-
  ## Context
  The skill and README document `bn create "task" --verify "cmd" --claim` but the --claim flag doesn't exist on the create command. Only `bn quick` does create+claim. This is the #1 UX gap.

  ## Task
  1. Add `--claim` flag to the Create command in src/cli.rs
  2. In src/commands/create.rs, after bean creation, if --claim is set, call cmd_claim to claim the bean
  3. Add tests for the new flag

  ## Files
  - src/cli.rs (add --claim flag to Create variant)
  - src/commands/create.rs (implement claim after creation)
  - src/main.rs (pass claim flag through to cmd_create)

  ## Notes
  - The claim logic already exists in src/commands/claim.rs - reuse cmd_claim
  - --claim and --run should be mutually exclusive (you either work on it or delegate it)
  - Make sure to add the `by` parameter support too (--by flag)
closed_at: 2026-02-18T05:39:30.524273Z
close_reason: |-
  Added --claim and --by flags to `bn create` command:

  1. **src/cli.rs**: Added `--claim` flag (conflicts_with "run") and `--by` flag (requires "claim") to the Create variant
  2. **src/commands/create.rs**: Added `claim` and `by` fields to `CreateArgs`; after bean creation, if `claim` is true, calls `cmd_claim` to set status to in_progress
  3. **src/main.rs**: Passes the new `claim` and `by` fields through to `CreateArgs`
  4. **Tests**: Added 4 new tests:
     - `create_with_claim_sets_in_progress` - verifies claim flag works with --by
     - `create_with_claim_without_by` - verifies claim works without --by
     - `create_without_claim_stays_open` - verifies default behavior unchanged
     - `create_with_claim_and_parent` - verifies claim works with child beans

  All 31 create tests pass. `--claim` and `--run` are mutually exclusive via clap's conflicts_with.
parent: '43'
verify: 'cd /Users/asher/beans && cargo test create --  2>&1 | grep -q ''test result: ok'''
claimed_at: 2026-02-18T05:37:01.592550Z
is_archived: true
produces:
- CreateClaimFlag
tokens: 16542
tokens_updated: 2026-02-18T05:35:01.276345Z
