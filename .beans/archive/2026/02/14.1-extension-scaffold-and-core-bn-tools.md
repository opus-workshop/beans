id: '14.1'
title: Extension scaffold and core bn tools
slug: extension-scaffold-and-core-bn-tools
status: closed
priority: 2
created_at: 2026-02-03T05:36:31.986331Z
updated_at: 2026-02-03T05:43:05.334268Z
description: "## What to implement\n\nCreate the extension scaffold and core bn tools that wrap the bn CLI.\n\n### Tools to implement\n\n1. **bn_status** - Returns claimed/ready/blocked beans\n2. **bn_ready** - Returns beans with no blockers  \n3. **bn_quick** - Create and claim a bean\n4. **bn_claim** - Claim or release a bean\n5. **bn_close** - Run verify and close if passes\n6. **bn_verify** - Test verify without closing\n\n### File\n\n~/.pi/agent/extensions/beans-tools.ts\n\n### Pattern\n\n```typescript\nimport type { ExtensionAPI } from \"@mariozechner/pi-coding-agent\";\nimport { Type } from \"@sinclair/typebox\";\nimport { execSync } from \"node:child_process\";\n\nexport default function(pi: ExtensionAPI) {\n  pi.registerTool({\n    name: \"bn_status\",\n    description: \"Show claimed/ready/blocked beans\",\n    parameters: Type.Object({}),\n    async execute() {\n      const result = execSync(\"bn status --json\", { encoding: \"utf-8\" });\n      return {\n        content: [{ type: \"text\", text: result }],\n        details: JSON.parse(result),\n      };\n    },\n  });\n  // ... more tools\n}\n```\n\n### Acceptance\n\n- Extension file exists and exports default function\n- bn_status returns { claimed: [], ready: [], blocked: [] }\n- bn_quick creates a bean and returns { id, title, path }\n- bn_claim/close/verify work with bean IDs"
closed_at: 2026-02-03T05:43:05.334268Z
close_reason: 'Created beans-tools.ts extension with 6 core bn tools: bn_status, bn_ready, bn_quick, bn_claim, bn_close, bn_verify. All tools wrap the bn CLI with JSON output parsing and proper error handling.'
parent: '14'
verify: test -f ~/.pi/agent/extensions/beans-tools.ts && grep -q 'bn_status' ~/.pi/agent/extensions/beans-tools.ts
claimed_at: 2026-02-03T05:41:50.715282Z
is_archived: true
produces:
- BeansExtension
- bn_status
- bn_ready
- bn_quick
- bn_claim
- bn_close
- bn_verify
