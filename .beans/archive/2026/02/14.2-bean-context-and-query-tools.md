id: '14.2'
title: Bean context and query tools
slug: bean-context-and-query-tools
status: closed
priority: 2
created_at: 2026-02-03T05:36:43.482526Z
updated_at: 2026-02-03T06:12:31.538913Z
description: "## What to implement\n\nAdd tools for querying and displaying bean information.\n\n### Tools to implement\n\n1. **bn_show** - Get full details of a bean (description, acceptance, notes)\n2. **bn_context** - Get file contents referenced in a bean\n3. **bn_tree** - Show hierarchy view of beans\n4. **bn_list** - List beans with optional filters (parent, status)\n\n### File\n\n~/.pi/agent/extensions/beans-tools.ts (extend existing)\n\n### Parameters\n\n```typescript\n// bn_show\nType.Object({\n  id: Type.String({ description: \"Bean ID\" }),\n})\n\n// bn_context  \nType.Object({\n  id: Type.String({ description: \"Bean ID\" }),\n})\n\n// bn_tree\nType.Object({\n  id: Type.Optional(Type.String({ description: \"Parent bean ID to show subtree\" })),\n})\n\n// bn_list\nType.Object({\n  parent: Type.Optional(Type.String({ description: \"Filter by parent ID\" })),\n  status: Type.Optional(Type.String({ description: \"Filter: open, in_progress, closed\" })),\n  all: Type.Optional(Type.Boolean({ description: \"Include closed beans\" })),\n})\n```\n\n### Custom Rendering\n\nbn_tree should render as an ASCII tree in TUI:\n\n```\n14 Pi tools extension\n├── 14.1 Extension scaffold [ready]\n├── 14.2 Context tools [blocked]\n└── 14.3 Spro tools [blocked]\n```\n\n### Acceptance\n\n- bn_show returns full bean object with all fields\n- bn_context returns { files: [{ path, content }] }\n- bn_tree renders hierarchy\n- bn_list supports --parent and --status filters"
closed_at: 2026-02-03T06:12:31.538913Z
close_reason: Added bn_tree tool with ASCII tree rendering for bean hierarchy. Tools bn_show, bn_context, and bn_list were already implemented. Added renderTree and getStatusLabel helper functions for tree visualization with status labels.
parent: '14'
verify: grep -q 'bn_show' ~/.pi/agent/extensions/beans-tools.ts && grep -q 'bn_tree' ~/.pi/agent/extensions/beans-tools.ts
claimed_at: 2026-02-03T06:11:43.266303Z
is_archived: true
produces:
- bn_show
- bn_context
- bn_tree
- bn_list
requires:
- BeansExtension
