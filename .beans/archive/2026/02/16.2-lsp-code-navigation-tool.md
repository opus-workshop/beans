id: '16.2'
title: LSP Code Navigation Tool
slug: lsp-code-navigation-tool
status: closed
priority: 2
created_at: 2026-02-02T09:23:32.104034Z
updated_at: 2026-02-02T09:35:50.537882Z
description: |-
  Create a pi extension that provides LSP-powered code navigation.

  ## Problem
  Current code exploration relies on grep/scan which:
  - Doesn't understand semantics (finds text matches, not actual references)
  - Can't jump to definition across packages/dependencies
  - Misses renamed symbols, aliases, re-exports

  ## Solution
  Integrate with lsproxy (Docker container with REST API) or directly spawn language servers.

  ### Option A: lsproxy (recommended for multi-language)
  - Run: docker run -p 4444:4444 -v $PWD:/mnt/workspace agenticlabs/lsproxy
  - REST API for definitions, references, symbols
  - Supports: Rust, TypeScript, Python, Go, Java, C/C++, PHP

  ### Option B: Direct LSP (lighter, single language)
  - Spawn rust-analyzer, tsserver, pyright directly
  - Communicate via JSON-RPC over stdin/stdout
  - More setup but no Docker dependency

  ## Tools
  - `lsp_definition` - Jump to symbol definition
  - `lsp_references` - Find all references to symbol
  - `lsp_symbols` - List symbols in file/workspace
  - `lsp_hover` - Get type/doc info at position

  ## Reference
  - lsproxy: github.com/agentic-labs/lsproxy
  - lsp-cli: github.com/lsp-client/lsp-cli
  - LSP spec: microsoft.github.io/language-server-protocol

  ## Files
  - ~/.pi/agent/extensions/lsp/index.ts
  - ~/.pi/agent/extensions/lsp/client.ts (lsproxy or direct LSP)

  ## Acceptance
  - Can find definition of a function in a Rust/TS project
  - Can find all references to a symbol
  - Works with external dependencies (node_modules, crates)
closed_at: 2026-02-02T09:35:50.537882Z
parent: '16'
verify: test -f ~/.pi/agent/extensions/lsp/index.ts
claimed_at: 2026-02-02T09:33:40.514776Z
is_archived: true
