id: 12.1.1
title: Add is_archived field to Bean struct
status: closed
priority: 1
created_at: 2026-01-31T00:00:00Z
updated_at: 2026-01-31T17:35:38.611287Z
description: |
  # Add is_archived field to Bean struct

  ## What

  Extend the `Bean` struct in `src/bean.rs` to track whether a bean has been moved to the archive.

  ## Implementation

  ### Files to modify
  - `src/bean.rs` — Bean struct definition

  ### What to implement

  Add optional field to `Bean` struct:

  ```rust
  #[serde(default, skip_serializing_if = "is_false")]
  pub is_archived: bool,
  ```

  Add helper function:

  ```rust
  fn is_false(v: &bool) -> bool {
      !*v
  }
  ```

  - Field defaults to `false` (not archived)
  - Serializes as `is_archived: true` only when true (to keep YAML clean)
  - Update `Bean::new()` to initialize as `is_archived: false`

  ## Acceptance

  - [ ] `is_archived: bool` field added to Bean struct
  - [ ] Field defaults to false
  - [ ] Serializes cleanly (omitted when false in YAML)
  - [ ] `Bean::new()` sets `is_archived: false`
  - [ ] Tests pass: `cargo test`
  - [ ] Existing beans still parse (backward compatible, optional field)

  ## Notes

  This is foundational—all archive/unarchive logic depends on it.
closed_at: 2026-01-31T17:35:38.611287Z
parent: '12.1'
is_archived: true
