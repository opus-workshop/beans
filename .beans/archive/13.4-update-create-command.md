---
id: 13.4
title: Update create command to generate slug from title
status: closed
priority: 1
created_at: 2026-01-30T00:00:00Z
updated_at: 2026-01-30T16:00:00Z
closed_at: 2026-01-30T16:00:00Z
parent: 13
dependencies: [13.1, 13.2, 13.3]
type: task
---

# Update create command to generate slug from title

## What

Modify `src/commands/create.rs` to:
1. Call `title_to_slug()` to generate slug from title
2. Include slug in YAML frontmatter
3. Write file as `{id}-{slug}.md` instead of `{id}.yaml`

## Current behavior

```rust
// In cmd_create:
let filename = format!("{}.yaml", bean_id);
let path = beans_dir.join(&filename);
```

## New behavior

```rust
// Generate slug from title
let slug = title_to_slug(&args.title);

// Write as {id}-{slug}.md with YAML frontmatter
let filename = format!("{}-{}.md", bean_id, slug);
let path = beans_dir.join(&filename);

// Bean struct now includes slug
let bean = Bean {
    id: bean_id,
    title: args.title,
    slug: Some(slug),
    // ... other fields
};
```

## Implementation

Update `src/commands/create.rs`:

1. Import `title_to_slug` from util:
   ```rust
   use crate::util::title_to_slug;
   ```

2. In `cmd_create()` function (around line 63-80):
   - After determining `bean_id`
   - Call `let slug = title_to_slug(&args.title);`
   - Create filename as `format!("{}-{}.md", bean_id, slug)`
   - Add `slug: Some(slug.clone())` to Bean struct initialization

3. Update `assign_child_id()` to handle new naming (if needed):
   - Glob pattern changes from `{parent_id}.{N}.yaml` to `{parent_id}.{N}-*.md`

## Code locations

- `src/commands/create.rs:60-100` â€” Update filename generation and Bean creation
- Update glob patterns for child ID assignment if needed

## Acceptance

- [ ] `bn create --title="My New Task"` generates slug from title
- [ ] Slug is kebab-case and valid for filenames
- [ ] File written as `{id}-{slug}.md`
- [ ] Bean struct includes `slug: Some(slug)` field
- [ ] Child bean creation (with parent) still works
- [ ] Child IDs assigned correctly (11.1, 11.2, etc.)
- [ ] YAML frontmatter valid
- [ ] `cargo test commands::create` passes
- [ ] Integration test: `bn create --title="Test Bean"` creates properly named file

## Testing

```bash
# Create a top-level bean
bn create --title="Implement feature"
# Should create: .beans/11-implement-feature.md

# Create a child bean
bn create --parent=11 --title="Update parser"
# Should create: .beans/11.1-update-parser.md

# Verify files exist and contain slug
cat .beans/11-implement-feature.md | grep slug
```

Verify:
- Filenames follow `{id}-{slug}.md` pattern
- Slug is kebab-case
- YAML contains `slug: <generated slug>`
- All existing flags (priority, assignee, etc.) still work
