---
id: 13.1
title: Add slug generation utility function
status: open
priority: 1
created_at: 2026-01-30T00:00:00Z
updated_at: 2026-01-30T00:00:00Z
parent: 13
type: task
---

# Add slug generation utility function

## What

Add a `title_to_slug()` function to `src/util.rs` that converts bean titles into URL-safe kebab-case slugs for use in filenames.

**Examples:**
- "Implement `bn show` to render Markdown" → "implement-bn-show-to-render-markdown"
- "Update Bean parser to read .md + YAML frontmatter" → "update-bean-parser-to-read-md-yaml-frontmatter"
- "My-Task!!!" → "my-task"
- "   Spaces   " → "spaces"

## Implementation

Create function in `src/util.rs`:

```rust
/// Convert a title to a kebab-case slug for use in filenames.
///
/// Rules:
/// - Lowercase all characters
/// - Remove non-alphanumeric characters except hyphens and spaces
/// - Convert spaces to hyphens
/// - Collapse consecutive hyphens into single hyphen
/// - Remove leading/trailing hyphens
/// - Truncate to 50 characters
/// - Return empty string → "unnamed"
///
/// # Examples
/// - "My Task" → "my-task"
/// - "Build API v2.0" → "build-api-v20"
/// - "Foo   Bar" → "foo-bar"
pub fn title_to_slug(title: &str) -> String {
    // ...implementation
}
```

**Algorithm:**
1. Trim whitespace
2. Lowercase
3. Replace spaces with `-`
4. Remove non-alphanumeric except `-`
5. Collapse consecutive `-` to single `-`
6. Remove leading/trailing `-`
7. Truncate to 50 chars
8. Return "unnamed" if empty

## Code locations

- `src/util.rs` — Add `title_to_slug()` function and tests

## Acceptance

- [ ] Function converts title → kebab-case slug
- [ ] Handles special characters (backticks, colons, spaces, etc.)
- [ ] Lowercases all output
- [ ] Collapses consecutive hyphens
- [ ] Truncates to 50 characters
- [ ] Returns "unnamed" for empty input
- [ ] Tests cover:
  - Basic alphanumeric
  - Spaces and hyphens
  - Special characters
  - Case sensitivity
  - Truncation
  - Edge cases (empty, whitespace only, etc.)
- [ ] `cargo test util::title_to_slug` passes

## Testing

```bash
cargo test title_to_slug
```

Examples to test:
- "Implement `bn show` to render Markdown"
- "Update Bean parser to read .md + YAML frontmatter"
- "Build API v2.0"
- "   Spaces   "
- "!!!Special!!!"
- "" (empty)
- "a" (single char)
