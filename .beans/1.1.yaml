id: '1.1'
title: Extract file paths from bean descriptions using regex
status: open
priority: 2
created_at: 2026-01-31T17:01:09.785698Z
updated_at: 2026-01-31T17:01:09.785698Z
description: |-
  Implement core regex-based path extraction function for bctx.

  ## What to Implement
  Create src/ctx_assembler.rs with:
  - fn extract_paths(description: &str) -> Vec<String>
    - Regex pattern: matches relative file paths with extensions
    - Patterns to match: src/foo.rs, tests/bar.rs, Cargo.toml, etc.
    - Extensions: .rs, .ts, .py, .md, .json, .toml, .yaml, .sh, .go, .java
    - Return deduplicated paths in order of appearance

  ## Files
  - src/ctx_assembler.rs (new file)
    - Add use regex::Regex
    - extract_paths() function with unit tests

  ## Implementation Details
  Pattern: Look for relative paths (start with alphanumeric or .), followed by / and filename with extension.
  Example regex: r'\b([a-zA-Z0-9_.][a-zA-Z0-9_./\-]*\.(rs|ts|py|md|json|toml|yaml|sh|go|java))\b'

  Test cases:
  - Single path: 'Modify src/main.rs' → ['src/main.rs']
  - Multiple paths: 'See src/foo.rs and tests/bar.rs' → ['src/foo.rs', 'tests/bar.rs']
  - Duplicates: 'src/main.rs mentioned twice' → ['src/main.rs'] (deduplicated)
  - With punctuation: 'File: src/main.rs.' → ['src/main.rs']
  - No paths: 'No files mentioned' → []
acceptance: |-
  - extract_paths() correctly identifies relative file paths with extensions
  - Deduplicates paths (same file mentioned twice = one entry)
  - Handles punctuation correctly (paths in sentences)
  - Ignores non-matching patterns (URLs, absolute paths)
  - Returns Vec in order of appearance
  - Unit tests cover: single path, multiple paths, duplicates, edge cases
  - cargo test passes
parent: '1'
verify: cargo test --lib ctx_assembler::extract_paths
